<html>
  <head>
     <title>Vivo Net - Erro</title>
     <script language="javascript">
        var detailsEnabled = true;
        var detailsHidden = true;
        var widthWide;
        var heightTall;
        var widthNarrow;
        var heightSmall;
        
        function fillInObjects() {
            // 1 - widthWide
            // 2 - heightTall
            // 3 - widthNarrow
            // 4 - heightSmall
            // 5 - WebApp Context (eg: "/FrontOfficeWeb")
            // 6 - errorIcon image name (eg: "error.png")
            // 7 - errorCode
            // 8 - errorMessage
            // 9 - errorStack
        
            // get arguments
            var windowArguments = window.dialogArguments;
        
            /*
            alert('windowArguments.widthWide    = '+windowArguments.widthWide);
            alert('windowArguments.heightTall   = '+windowArguments.heightTall);
            alert('windowArguments.widthNarrow  = '+windowArguments.widthNarrow);
            alert('windowArguments.heightSmall  = '+windowArguments.heightSmall);
            alert('windowArguments.context      = '+windowArguments.context);
            alert('windowArguments.errorIcon    = '+windowArguments.errorIcon);
            alert('windowArguments.errorCode    = '+windowArguments.errorCode);
            alert('windowArguments.errorMessage = '+windowArguments.errorMessage);
            alert('windowArguments.errorStack   = '+windowArguments.errorStack);
            */

            // get window sizes to be used
            widthWide   = windowArguments.widthWide;
            heightTall  = windowArguments.heightTall;
            widthNarrow = windowArguments.widthNarrow;
            heightSmall = windowArguments.heightSmall;

            // get web application context
            context = windowArguments.context;

            // adjust Details button
            detailsEnabled = windowArguments.detailsEnabled;
            var buttonDetalhes = document.getElementById('buttonDetalhes');
            if (detailsEnabled) {
                buttonDetalhes.src = context + '/resources/images/bt_detalhes_nrml.gif';
            } else {
                buttonDetalhes.parentNode.removeChild(buttonDetalhes);
            }
            // adjust Close button
            document.getElementById('buttonFechar').src   = context + '/resources/images/bt_fechar_nrml.gif';

            // adjust error icon
            document.getElementById('elemErrorIcon').src  = context + "/resources/images/" + windowArguments.errorIcon;

            // adjust error code, error message and stack trace
            document.getElementById('elemErrorCode').value    = windowArguments.errorCode;
            document.getElementById('elemErrorMessage').innerText = windowArguments.errorMessage;
            document.getElementById('elemErrorStack').value   = windowArguments.errorStack;
        }

        function closeWindow() {
            window.close();
        }

        function toggleStackTrace() {
            var width;
            var height;
        
            if (detailsHidden) {
                mostrarerro.style.display = '';
                width  = widthWide;
                height = heightTall;
            } else {
                mostrarerro.style.display = 'none';
                width  = widthNarrow;
                height = heightSmall;
            }

            var top  = screen.availHeight/2 - height/2;
            var left = screen.availWidth/2  - width/2;

            window.dialogWidth  = width+'px';
            window.dialogHeight = height+'px';
            window.dialogTop    = top+'px';
            window.dialogLeft   = left+'px';

            document.getElementById('tableFrame').width = width-6+'px';
            var new_width = width-6-document.getElementById('iconAndCode').width + 'px';
            document.getElementById('errorMessageCell').width = new_width;
            document.getElementById('errorMessageLabel').width = new_width;
            detailsHidden = !detailsHidden;
        } 
    </script>
  </head>
  <body onload="fillInObjects()">    
    <table id="tableFrame" width='444' height='10' border='0' cellpadding='0' cellspacing='0' bgcolor='#E3ECF4'>
        <tr>
            <td id="iconAndCode" width="80px" align="left" style="font:10pt">
                <table width='100%' border='0' cellpadding='0' cellspacing='0'>
                    <tr>
                        <td align="center" height='56'><img id='elemErrorIcon' align="middle" src='/FrontOfficeWeb/resources/images/error.png'/></td>
                    </tr>
                    <tr>
                        <td height='20' align="center" style="font:10pt;font-family:Tahoma,Arial,Helvetica,sans-serif;"><span id='elemErrorCode'>0000</span></td>
                    </tr>
                </table>
            </td>
            <td id="errorMessageCell" align="left" style="font:9pt;width:360px;height:86px;"><LABEL id="errorMessageLabel" style="font:9pt;width:360px;height:68px;overflow:hidden;text-overflow:ellipsis;font-family:Tahoma,Arial,Helvetica,sans-serif;"><span id='elemErrorMessage'>Message not available</span></LABEL></td>
        </tr>
        <tr>
            <td colspan="2" height="20"></td>
        </tr>
        <tr>
            <td align="left"> <img id='buttonDetalhes' hspace='6' style="border:0px;" onclick="toggleStackTrace()" src=''/></td>
            <td align="right"><img id='buttonFechar'   hspace='6' style="border:0px;" onClick="closeWindow()"      src=''/></td>
        </tr>
        <tr>
            <td colspan="2" height="6"></td>
        </tr>
        <tr>
            <td colspan="2" align="left">
                <table id="mostrarerro" style="display:none" width='100%' border='0' cellpadding='0' cellspacing='0'>
                    <tr>
                        <td align="left"><textarea id='elemErrorStack' XXXwrap="off" style="font:9pt;width:594;height:200px;overflow:scroll" readonly>Stack trace not available</textarea></td>
                    </tr>
                    <tr>
                        <td height="6"></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
  </body>
</html>
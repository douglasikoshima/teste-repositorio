

#import WFGRetWFCTI:SetUser;
#import WFGRetWFCTI:SelectByRetWFCTI;
XMLGen xml;
int usr;
int count;
RECORDSET rs;
string str;
string idu;

usr=GetHdrData("user");

str="SELECT sgretornowfcti,dsretornowfcti,sgstatus,inpadrao FROM workflow.retornowfctib00 "+
	"WHERE idretornowfcti=:idu";
idu=XML:idRetornoWFCTI;
rs=OpenRecordset(str);

count=rs.RowCount();
if(!count)
	xml="<RetornoWFCTIVO/>";
else
	str="<RetornoWFCTIVO xmlns=\"workflow.fo.vivo.com.br/vo\"><idRetornoWFCTI>"+idu+"</idRetornoWFCTI>"+
	"<sgRetornoWFCTI>"+rs.GetValue("sgretornowfcti")+"</sgRetornoWFCTI>"+
	"<dsRetornoWFCTI>"+rs.GetValue("dsretornowfcti")+"</dsRetornoWFCTI>"+
	"<sgStatus>"+rs.GetValue("sgstatus")+"</sgStatus>"+
	"<inPadrao>"+rs.GetValue("inpadrao")+"</inPadrao>";

	xml=str;
	WFGRetWFCTI.SetUser(usr);
	xml=WFGRetWFCTI.SelectByRetWFCTI(XML);
	xml+="</RetornoWFCTIVO>";
fi;

return xml;
      

            
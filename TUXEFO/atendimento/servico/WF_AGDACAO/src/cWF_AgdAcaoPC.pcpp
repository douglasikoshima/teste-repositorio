
#include "../include/cWF_AgdAcaoPC.h"


// SQL SELECT TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI') DATAATUAL FROM DUAL;

bool cWF_Agendamento::getSysDate()
{
    ULOG_START("cWF_Agendamento::getSysDate()"); 
	struct sqlca sqlca;
	

	EXEC SQL BEGIN DECLARE SECTION;
	  char     dsSysdate[256];
	EXEC SQL END DECLARE SECTION;

	EXEC SQL WHENEVER SQLERROR DO sql_error_WF_Encaminham(&sqlca);

	EXEC SQL 
		SELECT TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI') into :dsSysdate FROM DUAL;
	
	sSysDate = TString(dsSysdate).Trim();

	ULOG_END("cWF_Agendamento::getSysDate()"); 

	return true;

}

void cWF_Agendamento::sql_error_WF_Encaminham(sqlca*sqlca)
{
	throw new TuxBasicOraException(sqlca->sqlcode,sqlca->sqlerrm.sqlerrmc,sqlca->sqlerrm.sqlerrml);
}



#undef SQLCA
#define SQLCA_NONE
#include<sqlca.h>
#include<sqlda.h>

#include<classdata.h>

int SaveTesteResposta(char crs,int idt,int iat,int iusr)
{
	INITIALIZE_SQL;
	EXEC SQL BEGIN DECLARE SECTION;
		VARCHAR vcrs[2];
		int piusr;
		int pidt;
		int piat;
		int idTesteResposta;
	EXEC SQL END DECLARE SECTION;

	EXEC SQL WHENEVER SQLERROR GOTO UndefinedError;

	piusr=iusr;
	pidt=idt;
	piat=iat;
	vcrs.arr[0]=crs;
	vcrs.len=1;
	EXEC SQL SELECT atendimento.TesteRespostaSQ.nextval INTO :idTesteResposta FROM DUAL;
	EXEC SQL INSERT INTO atendimento.TesteResposta(
	IDTesteResposta,DSResposta,IDTeste,IDAtendimentoTeste,IDUsuarioAlteracao,DTUltimaAlteracao)
		VALUES(:idTesteResposta,:vcrs,:pidt,:piat,:piusr,SYSDATE);
	return idTesteResposta;
UndefinedError:
	return sqlca.sqlcode;
}

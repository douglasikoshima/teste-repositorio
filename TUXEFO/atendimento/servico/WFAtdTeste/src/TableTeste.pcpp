#undef SQLCA
#define SQLCA_NONE
#include<sqlca.h>
#include<sqlda.h>

#include<classdata.h>

int SaveAtendimentoTeste(int iat,int iusr,char*pobs)
{
	INITIALIZE_SQL;
	EXEC SQL BEGIN DECLARE SECTION;
		VARCHAR pvobs[256];
		int piusr;
		int piat;
		int idATeste;
	EXEC SQL END DECLARE SECTION;

	EXEC SQL WHENEVER SQLERROR GOTO UndefinedError;

	piusr=iusr;
	piat=iat;
	TO_VARCHAR(pvobs,pobs);
	EXEC SQL SELECT atendimento.AtendimentoTesteSQ.nextval INTO :idATeste FROM DUAL;
	EXEC SQL INSERT INTO atendimento.AtendimentoTeste
		(idAtendimentoTeste,dtTeste,idAtendimento,idPessoaUsuario,idUsuarioAlteracao,dtUltimaAlteracao,dsobservacao)
		VALUES(:idATeste,sysdate,:piat,:piusr,:piusr,sysdate,:pvobs);
	return idATeste;
UndefinedError:
	return sqlca.sqlcode;
}

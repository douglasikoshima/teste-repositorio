/**
 * Serviço de sonda
 **/

#undef SQLCA
#define SQLCA_NONE

#include<stdio.h>
#include<sqlca.h>
#include<sqlda.h>
#include<iostream.h>

#include "Sonda.hpp"
#include "../../../negocio/commons/include/Commom.hpp"

bool sisDisponivel(char* sigla) {
	struct sqlca sqlca;

	EXEC SQL BEGIN DECLARE SECTION;
		int iOraDisp;
		char oraSigla[256];
	EXEC SQL END DECLARE SECTION;

	sprintf(oraSigla, "%s", sigla);

	/* Busca se o sistema está no ar, através da tabela apoio.sistemaorigem
         */
	EXEC SQL SELECT inDisponivel
			   INTO :iOraDisp
			   FROM apoio.sistemaorigem 
			  WHERE sgsistemaorigem = :oraSigla;

	if (iOraDisp == 0)
		return false;
	else
		return true;
}
